<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html><head><meta http-equiv="Content-Type" content="text/html;charset=utf-8"><title>Appendix A: Building/Installing from Source</title><link rel="stylesheet" type="text/css" href="../style.css"></head><body><div class="header"><table><tr><td align="left"><a href="server.html">Previous</a></td><td align="center"><a href="index.html">Contents</a></td><td align="right"><a href="copyright.html">Next</a></td></tr></table></div><h2>Appendix A: Building/Installing from Source</h2><p>This Appendix gives information on how to build and install <i>Knights</i> from the source code.</p><h3>Linux</h3><p>For Linux a Makefile is provided. Most users should just be able to type <b>make</b> followed by <b>make install</b> to build and install respectively. After installing, type <b>knights</b> to run the game.</p><p>Before compiling, make sure you have the necessary dependencies installed. The game requires Boost, SDL, libcurl, Freetype and Fontconfig. On Debian systems the following packages will satisfy the requirements:</p><ul><li>libboost-dev</li><li>libboost-filesystem-dev</li><li>libboost-system-dev</li><li>libboost-thread-dev</li><li>libsdl-dev</li><li>libcurl4-openssl-dev <i>or</i> libcurl4-gnutls-dev</li><li>libfreetype6-dev</li><li>libfontconfig-dev</li></ul><p>(If you only want to build the server, and not the game itself, then only Boost and libcurl are needed.)</p><h4>Troubleshooting</h4><ul><li>On some Linux distributions you may get undefined references to &quot;clock_gettime@@GLIBC_2.2.5&quot; or similar. To fix this, append &quot;-lrt&quot; (without the quotes) to the BOOST_LIBS line in the Knights Makefile.</li><li>If you get Boost related errors, check that you have at least version 1.48 of Boost, and that you have all the relevant Boost packages installed. Also, depending on your exact Linux distribution you might need to edit some of the Makefile options – see comments at the top of the Makefile for details.</li></ul><h4>More Details</h4><p>You can install only parts of the game by using the following:</p><ul><li>make install_knights – install only the game (and its data files)</li><li>make install_server – install only the server (and its data files)</li><li>make install_docs – install only the documentation files.</li></ul><p>By default the game installs the &quot;knights&quot; and &quot;knights_server&quot; executables to /usr/local/bin/, data files to /usr/local/share/knights/, and documentation files to /usr/local/share/doc/knights/. The default install directory can be changed by setting the PREFIX variable, e.g. to install in your home directory use &quot;make PREFIX=$HOME&quot; and &quot;make install PREFIX=$HOME&quot;. (The PREFIX should agree between the make and make install commands, otherwise the game will not work!)</p><p>For finer control of installation directories, use the following variables:</p><ul><li>BIN_DIR: location of the Knights binary (default: $(PREFIX)/bin)</li><li>DATA_DIR: location of the Knights data files (default: $(PREFIX)/share/knights)</li><li>DOC_DIR: location of the documentation files (default: $(PREFIX)/share/doc/knights)</li><li>KNIGHTS_BINARY_NAME: name of the Knights executable (default: knights)</li><li>SERVER_BINARY_NAME: name of the server executable (default: knights_server)</li></ul><p>It is possible to build a version without sound support by editing the Makefile and adding &quot;-DDISABLE_SOUND&quot; to the CPPFLAGS. This might be useful if sound doesn&#39;t work on your system for some reason.</p><p>The Makefile also supports &quot;make uninstall&quot; (but make sure you pass the correct PREFIX or DIR variables, e.g. &quot;make uninstall PREFIX=$HOME&quot;, if you changed these from their default values).</p><p>If you are developing, you may like to know that the Makefile is generated automatically from Visual Studio project files (see makemakefile.py in the python directory). The Makefile also uses the &quot;Advanced Auto-Dependency Generation&quot; technique described here: <a href="http://web.archive.org/web/20080123214633/make.paulandlesley.org/autodep.html">http://web.archive.org/web/20080123214633/make.paulandlesley.org/autodep.html</a>.</p><h3>Windows</h3><p>(Sorry, the Windows building instructions are currently being updated. In the meantime, if you look in the knights source code archive you should find a file docs/manual/building.html which has the previous version of the instructions.)</p><div class="footer2"><table><tr><td align="left"><a href="server.html">Previous</a></td><td align="center"><a href="index.html">Contents</a></td><td align="right"><a href="copyright.html">Next</a></td></tr><tr><td align="left">Running a Server</td><td></td><td align="right">Copyright and Contact Details</td></tr></table></div></body></html>