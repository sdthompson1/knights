<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01//EN"
    "http://www.w3.org/TR/html4/strict.dtd">
<html>
  <head>
    <meta http-equiv="Content-Type" content="text/html;charset=utf-8">
    <title>Appendix A: Building/Installing from Source</title>
    <link rel="stylesheet" type="text/css" href="../style.css">
  </head>
  <body>
    <div class="wrap">
      <div class="header">
        <table>
          <tr>
            <td align="left"><a href="server.html">Previous</a></td>
            <td align="center"><a href="index.html">Contents</a></td>
            <td align="right"><a href="copyright.html">Next</a></td>
          </tr>
        </table>
      </div>

      <h2>Appendix A: Building/Installing from Source</h2>

      <p>This Appendix gives information on how to build and
        install <i>Knights</i> from the source code.</p>

      <h3>Linux</h3>

      <p>For Linux a Makefile is provided. Please read the comments at
        the top of that file for full instructions and troubleshooting
        information.</p>

      <h3>Windows</h3>

      <p>Most Windows users will use the pre-packaged installer,
        however if you want to try building the game from source code,
        then read on.</p>

      <p>I will assume that you are building with Visual Studio. (You
        can get the Visual Studio Community Edition for free from
        Microsoft.)</p>

      <p>Before you start, note that Knights is currently
        using <a href="https://vcpkg.io/">vcpkg</a> for dependency
        management, so the first thing to do is install vcpkg on your
        local machine. Follow step 1 ("Set up vcpkg") from Microsoft's
        <a href="https://learn.microsoft.com/en-gb/vcpkg/get_started/get-started-msbuild?pivots=shell-cmd">Tutorial:
        Install and use packages with MSBuild in Visual
        Studio</a>.</p>

      <p>Next, obtain the Knights source code, either by downloading
        the latest source release from
        the <a href="https://www.knightsgame.org.uk/download">download
        page</a>, or by cloning
        the <a href="https://github.com/sdthompson1/knights">Git
          repository</a>.</p>

      <p>Then, navigate to the &quot;msvc&quot; folder within the
        Knights source code directory, and open Knights.sln. Then
        simply do &quot;Build Solution&quot; which will build the
        Knights game and server executables. (The first build might
        take a bit longer than usual, because vcpkg will automatically
        download and unpack all required dependencies, such as Boost,
        SDL2 and Libcurl.) Both Release and Debug builds are
        available.</p>

      <p>To run the game from within the IDE, you will need to do the
        following:</p>

      <ol>
        <li>Right-click on KnightsMain and choose &quot;Set as Startup
          Project&quot;.</li>
        <li>Right-click on KnightsMain, choose &quot;Properties&quot;,
          go to &quot;Configuration Properties → Debugging → Command
          Arguments&quot;, and enter &quot;-d
          $(ProjectDir)\..\..\knights_data&quot; (without the
          quotes).</li>
        <li>Now you can just press F5 to run the game.</li>
      </ol>

      <p>You can run the command-line server by setting KnightsSvrMain
        as the startup project.</p>

      <p>If you want to build the installer you must
        install <a href="https://jrsoftware.org/isinfo.php">Inno
        Setup</a>. Then open a command prompt, cd to the Knights source
        directory and issue the following command:</p>

      <p><code>&quot;c:\program files (x86)\inno setup 6\iscc&quot;
          installer.iss</code></p>

      <p>This will make an &quot;Output&quot; directory and build the
        Knights installer there.</p>

      <div class="footer2">
        <table>
          <tr>
            <td align="left"><a href="server.html">Previous</a></td>
            <td align="center"><a href="index.html">Contents</a></td>
            <td align="right"><a href="copyright.html">Next</a></td>
          </tr>
          <tr>
            <td align="left">Running a Server</td>
            <td></td>
            <td align="right">Copyright and Contact Details</td>
          </tr>
        </table>
      </div>
    </div>
  </body>
</html>
